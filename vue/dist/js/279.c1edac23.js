"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[279],{4279:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});a(7658);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"20px"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"Name"},model:{value:e.params.username,callback:function(t){e.$set(e.params,"username",t)},expression:"params.username"}}),t("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"Phone"},model:{value:e.params.phone,callback:function(t){e.$set(e.params,"phone",t)},expression:"params.phone"}}),t("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"Email"},model:{value:e.params.email,callback:function(t){e.$set(e.params,"email",t)},expression:"params.email"}}),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.load}},[t("i",{staticClass:"el-icon-search"}),e._v(" Search")]),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:e.reset}},[t("i",{staticClass:"el-icon-refresh"}),e._v(" Reset")])],1),t("el-table",{attrs:{data:e.tableData,stripe:"","empty-text":" "}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),t("el-table-column",{attrs:{prop:"username",label:"Name"}}),t("el-table-column",{attrs:{prop:"phone",label:"Phone"}}),t("el-table-column",{attrs:{prop:"email",label:"Email"}}),t("el-table-column",{attrs:{prop:"createtime",label:"Time of Creation"}}),t("el-table-column",{attrs:{prop:"updatetime",label:"Time of Update"}}),t("el-table-column",{attrs:{label:"Status",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(t){return e.changeStatus(a.row)}},model:{value:a.row.status,callback:function(t){e.$set(a.row,"status",t)},expression:"scope.row.status"}})]}}])}),t("el-table-column",{attrs:{label:"Operation",width:"230"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/editAdmin?id="+a.row.id)}}},[e._v("Edit")]),t("el-popconfirm",{staticStyle:{"margin-left":"5px"},attrs:{title:"Are you sure to delete this admin?"},on:{confirm:function(t){return e.del(a.row.id)}}},[t("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v("Delete")])],1),t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warning"},on:{click:function(t){return e.handleChangePass(a.row)}}},[e._v("Change Password")])]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-pagination",{attrs:{background:"","current-page":e.params.pageNum,"page-size":e.params.pageSize,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"Change Password",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"formRef",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"New Password",prop:"newPass"}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.form.newPass,callback:function(t){e.$set(e.form,"newPass",t)},expression:"form.newPass"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:e.savePass}},[e._v("Confirm")])],1)],1)],1)},r=[],i=a(4471),l=a(680),o={name:"AdminList",data(){return{admin:l.Z.get("admin")?JSON.parse(l.Z.get("admin")):{},tableData:[],total:0,form:{},dialogFormVisible:!1,params:{pageNum:1,pageSize:10,username:"",phone:"",email:""},rules:{newPass:[{required:!0,message:"Required",trigger:"blur"},{min:3,max:10,message:"Length should between 3 and 10",trigger:"blur"}]}}},created(){this.load()},methods:{changeStatus(e){if(this.admin.id===e.id&&!e.status)return e.status=!0,void this.$notify.warning("Illegal operation");i.Z.put("/admin/update",e).then((e=>{"200"===e.code?(this.$notify.success("Successful operation"),this.load()):this.$notify.error(e.msg)}))},handleChangePass(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0},savePass(){this.$refs["formRef"].validate((e=>{e&&i.Z.put("/admin/password",this.form).then((e=>{"200"===e.code?(this.$notify.success("Successful operation"),this.form.id===this.admin.id?(l.Z.remove("admin"),this.$router.push("/login")):(this.load(),this.dialogFormVisible=!1)):this.$notify.error("Failed to change password")}))}))},load(){i.Z.get("/admin/page",{params:this.params}).then((e=>{"200"===e.code&&(this.tableData=e.data.list,this.total=e.data.total)}))},reset(){this.params={pageNum:1,pageSize:10,username:"",phone:"",email:""},this.load()},handleCurrentChange(e){this.params.pageNum=e,this.load()},del(e){i.Z["delete"]("/admin/delete/"+e).then((e=>{"200"===e.code?(this.$notify.success("Successful operation"),this.load()):this.$notify.error(e.msg)}))}}},n=o,u=a(1001),p=(0,u.Z)(n,s,r,!1,null,"6884900c",null),m=p.exports}}]);
//# sourceMappingURL=279.c1edac23.js.map